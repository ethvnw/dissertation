{% extends "base.html" %}
{% load static %}
{% block title %}New Application{% endblock %}
{% block content %}

<div class="flex flex-col lg:flex-row justify-between gap-8">
    <aside>
        <h1 class="mb-4">New Extenuating Circumstances Application.</h1>
        <h2 class="mb-2">Information</h2>
        <div class="flex flex-row items-baseline gap-2 mb-4">
            <i class="fa-solid fa-circle-info text-uni-violet"></i>
            {% if user.student.support_plan %}
                <p class="italic">Your account has a registered learning support plan. This will be forwarded along with your application form.</p>
            
            {% else %}
                <p class="italic">You do not have a learning support plan registered to your account. If this is a mistake, please upload it on your <a href="" class="text-uni-violet hover:underline">profile page</a>.</p>
            {% endif %} 
        </div>

        <p>This form is for the purpose of reporting medical or personal circumstances that may be impacting your studies in relation to:</p>
        <ul class="list-disc list-inside ml-2 mb-4">
            <li>Assessments, including examinations and coursework</li>
            <li>None or late submission of coursework</li>
            <li>Absence from study of more than 7 calendar days</li>
        </ul>
        <p class="mb-4">It is your responsibility to notify your department by completing this form at the earliest opportunity if there are any extenuating circumstances that might have a bearing on examination / assessment performance.</p>

    </aside>
    
    <section class="p-4 rounded-sm bg-gray-50 shadow-md w-full">
        <form id="form-container" class="w-full" method="post" data-active-form="info-form">
            {% csrf_token %}
            {{ assessment_formset.management_form }}
            
            <div id="info-form" data-is-form="true">
                {{ app_form }}
            </div>

            {% for form in assessment_formset %}
                <div id="module-0" class="hidden" data-is-form="true" data-is-module-form="true">
                    {{ form }}
                </div>
            {% endfor %}    
            
            <div id="button-container" class="flex justify-between border-t border-gray-300 mt-4 pt-2">
                <button id="back-button" class="px-4 py-2 rounded-sm border border-uni-violet drop-shadow-md cursor-pointer hidden hover:text-uni-violet">Back</button>
                <button id="next-button" class="px-4 py-2 rounded-sm text-gray-100 bg-uni-violet drop-shadow-md hover:bg-uni-violet-hover hover:drop-shadow-none cursor-pointer hover:text-gray-100">Next</button>
    
                <button id="add-module-form" class="px-4 py-2 rounded-sm border border-uni-violet drop-shadow-md cursor-pointer hover:text-uni-violet hidden">Add another module asessment</button>
                <button id="submit-button" class="px-4 py-2 rounded-sm text-gray-100 bg-uni-violet drop-shadow-md hover:bg-uni-violet-hover hover:drop-shadow-none hidden" type="submit">Submit</button>
            </div>
            
        </form>
    </section>
</div>

<script src="{% static "ecfapps/js/form_control.js" %}"></script>
{% endblock %}
